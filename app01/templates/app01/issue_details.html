{% extends 'app01/layout/manage.html' %}
{% load static %}

{% block mycss %}
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"/>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">
    <style>
        .avatar{
            width: 40px;
            height: 40px;
            background-color: #1A1A17;
            color: white;
            border-radius: 20px;
            text-align: center;
            line-height: 40px;
            font-size: 16px;
        }
        .media-body span{
            margin-right: 20px;
            color: #999;
        }
    </style>
{% endblock %}

{% block body %}
    <div class="container-fluid">
        <div class="col-md-7">
            <div class="panel panel-default">
                <div class="panel-heading">编辑数据</div>
                <div class="panel-body">
                    <form class="form-horizontal">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="id_for_subject" class="col-sm-2 control-label">{{ form.subject.label }}</label>
                            <div class="col-sm-10">
                                {{ form.subject }}
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="id_for_issue_type" class="col-sm-2 control-label">{{ form.issue_type.label }}</label>
                            <div class="col-sm-10">
                                {{ form.issue_type }}
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="id_for_module" class="col-sm-2 control-label">{{ form.module.label }}</label>
                            <div class="col-sm-10">
                                {{ form.module }}
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="id_for_desc" class="col-sm-2 control-label">{{ form.desc.label }}</label>
                            <div class="col-sm-10">
                                <div id="editor">{{ form.desc }}</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label for="id_for_start_date" class="col-sm-4 control-label">{{ form.start_date.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.start_date }}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label for="id_for_end_date" class="col-sm-4 control-label">{{ form.end_date.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.end_date }}
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label for="id_for_parent" class="col-sm-4 control-label">{{ form.parent.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.parent }}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label for="id_for_attention" class="col-sm-4 control-label">{{ form.mode.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.mode }}
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label for="id_for_priority" class="col-sm-4 control-label">{{ form.priority.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.priority }}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label for="id_for_status" class="col-sm-4 control-label">{{ form.status.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.status }}
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label for="id_for_assign" class="col-sm-4 control-label">{{ form.assign.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.assign }}
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label for="id_for_attention" class="col-sm-4 control-label">{{ form.attention.label }}</label>
                                <div class="col-sm-8">
                                    {{ form.attention }}
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-5">
            <div class="panel panel-default">
                <div class="panel-heading">操作记录</div>
                <div class="panel-body">
                    <div class="reply">
                        <ul class="media-list">
                          <li class="media">
                            <div class="media-left">
                              <a href="#">
                                <div class="avatar">W</div>
                              </a>
                            </div>
                            <div class="media-body">
                              <h4 class="media-heading">Media heading</h4>
                              <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.</p>
                              <div class="media"></div>
                              <div class="media">
                                <div class="media-left">
                                  <div class="avatar">W</div>
                                </div>
                                <div class="media-body">
                                  <h4 class="media-heading">Nested media heading</h4>
                                  Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.
                                </div>
                              </div>
                            </div>
                          </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div id="reply-tmp" class="hidden">
            <div class="media">
            <div class="media-left">
              <div class="avatar">W</div>
            </div>
            <div class="media-body">
              <h4 class="media-heading">Nested media heading</h4>
              Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.
            </div>
          </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script src="{% static 'plugin/editor.md/editormd.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.zh-CN.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-zh_CN.min.js"></script>
    <script>
        $(function () {
            initEditor();
            initDatePicker();
        })

        function initEditor() {
            editormd('editor', {
                placeholder: "请输入内容",
                height: 300,
                path: "{% static 'plugin/editor.md/lib/' %}",
                imageUpload: true,
                imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                imageUploadURL: "{% url 'app01:wiki_upload' request.project.id %}",
                onload: function () {
                    this.previewing();
                }
            });
        }

        function initDatePicker() {
            $('#id_start_date').datepicker({
                format: 'yyyy-mm-dd',
                language: 'zh-CN',
                autoclose: true
            });
            $('#id_end_date').datepicker({
                format: 'yyyy-mm-dd',
                language: 'zh-CN',
                autoclose: true
            });
        }
    </script>
{% endblock %}